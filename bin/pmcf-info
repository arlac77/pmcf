#!/usr/bin/env node
import { cwd, argv } from "node:process";
import { World } from "../src/model.mjs";

const world = new World(argv[2] || cwd());

const objectName = argv[3];

if (objectName) {
  const object = await world.named(objectName);
  console.log(object.toJSON());
} else {
  for await (const location of world.locations()) {
    console.log(location.name);
    console.log("  ", (await location.service({ type: "dns"}))?.toString());
  }
}
