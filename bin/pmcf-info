#!/usr/bin/env node
import { prepare } from "../src/cli.mjs";

const { root, args, options } = await prepare({});

for (const name of args) {
  const [path, expression] = name.split("?");

  const object = await root.load(path);

  let result = object.expression(expression);

  if (result instanceof Iterator) {
    result = Array.from(result);
  }

  console.log(result);
}
